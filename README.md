# Kafka Messaging System

Проект демонстрирует взаимодействие микросервисов через Kafka с 
использованием Spring Boot.

- **Producer**: Публикует сообщения в топик Kafka. В сервисе присутствует генерация и отправляет сообщения каждую минуту с помощью аннотации @Scheduled.
- **Consumer**: Читает сообщения из топика Kafka и сохраняет их в PostgreSQL.
- **UI Backend**: Предоставляет API для управления сообщениями, хранящимися в PostgreSQL.

## Описание сервисов

1. **Kafka**: Используется для передачи сообщений между продюсером и консумером.
2. **Zookeeper**: Координирует работу кластера Kafka.
3. **PostgreSQL**: База данных для хранения сообщений.
4. **Producer**: Приложение Spring Boot, которое отправляет сообщения в Kafka.
5. **Consumer**: Приложение Spring Boot, которое читает сообщения из Kafka и сохраняет их в PostgreSQL.
6. **UI Backend**: Приложение Spring Boot, предоставляющее API для управления сообщениями.

## Требования

- Установленные Docker и Docker Compose.
- Java 17 или выше для локальной сборки приложений Spring Boot (опционально).

## Установка и запуск

### 1. Сборка приложений
```bash
./gradlew build
```

### 2. Запуск системы

```bash
docker-compose up --build
```

### 3. Проверка работы

- Kafka будет доступен на порту 9092.
- PostgreSQL будет доступен на порту 5432.
- Producer будет доступен на http://localhost:8081.
- Consumer будет доступен на http://localhost:8082.
- UI Backend будет доступен на http://localhost:8083.

### 4. Эндпоинты UI-back
**Описание:** Возвращает список всех сообщений.  
**Метод:** `GET`  
**URL:** `http://localhost:8083/api/v1/messages`
**Ответ:**`200 OK: Возвращает массив объектов `Message``.

**Пример ответа:**
   ```json
[
  {
    "id": 1,
    "code": "711d3279-a847-4eed-9d46-a5d0b3ffccb6",
    "label": "Сообщение отправлено 2024-11-18T13:20:04.330375854"
  },
  {
    "id": 2,
    "code": "028e52c3-b4b4-43d3-9033-ed044184a26f",
    "label": "Сообщение отправлено 2024-11-18T13:20:14.330451265"
  },
  {
    "id": 3,
    "code": "27b979bf-6ae0-4a50-967c-1014d9e6c09b",
    "label": "Сообщение отправлено 2024-11-18T13:20:24.330465193"
  }
]
```