# Kafka Messaging System

Проект демонстрирует взаимодействие микросервисов через Kafka с 
использованием Spring Boot.

- **Producer**: Публикует сообщения в топик Kafka. В сервисе присутствует генерация и отправляет сообщения каждую минуту с помощью аннотации @Scheduled.
- **Consumer**: Читает сообщения из топика Kafka и сохраняет их в PostgreSQL.
- **UI Backend**: Предоставляет API для управления сообщениями, хранящимися в PostgreSQL.

## Описание сервисов

1. **Kafka**: Используется для передачи сообщений между продюсером и консумером.
2. **Zookeeper**: Координирует работу кластера Kafka.
3. **PostgreSQL**: База данных для хранения сообщений.
4. **Producer**: Приложение Spring Boot, которое отправляет сообщения в Kafka.
5. **Consumer**: Приложение Spring Boot, которое читает сообщения из Kafka и сохраняет их в PostgreSQL. В приложении также используется Liquibase для управления миграциями базы данных, что позволяет автоматизировать процесс обновлений схемы базы данных при развертывании приложения.
6. **UI Backend**: Приложение Spring Boot, предоставляющее API для управления сообщениями.

## Требования

- Установленные Docker и Docker Compose.
- Java 17 или выше для локальной сборки приложений Spring Boot (опционально).

## Установка и запуск

### Сборка приложений
```bash
./gradlew build
```

### Запуск системы

```bash
docker-compose up --build
```

### Эндпоинты UI-back
#### 1. **Получить все сообщения**
- **URL:** `GET http://localhost:8083/api/v1/messages`
- **Описание:** Возвращает список всех сообщений.
- **Ответ:** 
  - **200 OK:** Список объектов `Message`.

#### 2. **Получить сообщение по ID**
- **URL:** `GET http://localhost:8083/api/v1/messages/{id}`
- **Описание:** Возвращает конкретное сообщение по его ID.
- **Параметры пути:**
    - `id` (Long): ID сообщения.
- **Ответ:**
    - **200 OK:** Объект `Message` с указанным ID.
    - **404 NOT FOUND:** Если сообщение с указанным ID не найдено.

#### 3. **Создать новое сообщение**
- **URL:** `POST http://localhost:8083/api/v1/messages`
- **Описание:** Создает новое сообщение.
- **Тело запроса:**
    - Объект `Message`, представляющий новое сообщение.
- **Ответ:**
    - **200 OK:** Созданный объект `Message`.

#### 4. **Обновить существующее сообщение**
- **URL:** `PUT http://localhost:8083/api/v1/messages/{id}`
- **Описание:** Обновляет существующее сообщение по его ID.
- **Параметры пути:**
    - `id` (Long): ID сообщения для обновления.
- **Тело запроса:**
    - Объект `Message` с обновленными данными.
- **Ответ:**
    - **200 OK:** Обновленный объект `Message`.
    - **404 NOT FOUND:** Если сообщение с указанным ID не найдено.

#### 5. **Удалить сообщение**
- **URL:** `DELETE http://localhost:8083/api/v1/messages/{id}`
- **Описание:** Удаляет сообщение по его ID.
- **Параметры пути:**
    - `id` (Long): ID сообщения для удаления.
- **Ответ:**
    - **200 OK:** Если сообщение успешно удалено.
    - **404 NOT FOUND:** Если сообщение с указанным ID не найдено.